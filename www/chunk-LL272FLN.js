import{a as k}from"./chunk-C6XTORT5.js";import{ab as u,g as m,i as n,u as d,y as l}from"./chunk-O7BVPMTN.js";var x=(()=>{let i=class i{constructor(){this.http=l(u),this.user=l(k),this.data=null}load(){return this.data?m(this.data):this.http.get("assets/data/data.json").pipe(n(this.processData,this))}processData(t){return this.data=t,this.data.schedule.forEach(s=>{s.groups.forEach(f=>{f.sessions.forEach(r=>{r.speakers=[],r.speakerNames&&r.speakerNames.forEach(o=>{let e=this.data.speakers.find(h=>h.name===o);e&&(r.speakers.push(e),e.sessions=e.sessions||[],e.sessions.push(r))})})})}),this.data}getTimeline(t,s="",f=[],r="all"){return this.load().pipe(n(o=>{let e=o.schedule[t];e.shownSessions=0,s=s.toLowerCase().replace(/,|\.|-/g," ");let h=s.split(" ").filter(a=>!!a.trim().length);return e.groups.forEach(a=>{a.hide=!0,a.sessions.sort((p,g)=>{let E=new Date("1970/01/01 "+p.timeStart).getTime(),S=new Date("1970/01/01 "+g.timeStart).getTime();return E-S}),a.sessions.forEach(p=>{this.filterSession(p,h,f,r),p.hide||(a.hide=!1,e.shownSessions++)})}),e}))}filterSession(t,s,f,r){let o=!1;s.length?s.forEach(a=>{t.name.toLowerCase().indexOf(a)>-1&&(o=!0)}):o=!0;let e=!1;t.tracks.forEach(a=>{f.indexOf(a)===-1&&(e=!0)});let h=!1;r==="favorites"?this.user.hasFavorite(t.name)&&(h=!0):h=!0,t.hide=!(o&&e&&h)}getSpeakers(){return this.load().pipe(n(t=>t.speakers))}getTracks(){return this.load().pipe(n(t=>t.tracks))}getMap(){return this.load().pipe(n(t=>t.map))}};i.\u0275fac=function(s){return new(s||i)},i.\u0275prov=d({token:i,factory:i.\u0275fac,providedIn:"root"});let c=i;return c})();export{x as a};
//# sourceMappingURL=chunk-LL272FLN.js.map
